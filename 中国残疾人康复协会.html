<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no, email=no, date=no">
    <title>专业技能证书查询</title>

    <!-- 极致优化CSS -->
    <style>
    :root{--c-main:#ff4d4f;--c-text:#333;--c-bg:#fff}*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:100%}body{font-family:-apple-system,BlinkMacSystemFont,"Microsoft YaHei",sans-serif;line-height:1.5;color:var(--c-text);background:var(--c-bg)}.certificate-container{max-width:800px;margin:0 auto;padding:15px}.info-list{padding:0;margin:0 0 2rem;list-style:none}.info-list li{display:grid;grid-template-columns:minmax(90px,auto)1fr;align-items:baseline;gap:0;padding:10px 0;border-bottom:1px solid #eee}.info-label{color:#666;white-space:nowrap;position:relative;padding-right:1.2em}.info-label::after{content:"：";position:absolute;right:0;top:50%;transform:translateY(-58%)}.info-content{min-width:0;word-break:break-word;text-align:left;padding-left:0.5em}.image-wrapper{margin:1.5rem 0;background:#f5f5f5;aspect-ratio:4/3;position:relative}.cert-image{width:100%;height:100%;object-fit:contain;opacity:0;transition:opacity .3s;transform:translateZ(0)}.cert-image.loaded{opacity:1}.download-tip{text-align:center;color:#666;margin:1rem 0;font-size:14px}.required-star{color:var(--c-main);margin-right:4px}@media (max-width:480px){.certificate-container{padding:10px}.info-list li{grid-template-columns:minmax(80px,auto)1fr;font-size:14px}.info-content{word-break:break-all}}
    </style>

    <!-- 精准预加载 -->
    <link rel="preload" href="./wss.webp" as="image" type="image/webp">
    <link rel="preload" href="./wss.jpg" as="image" type="image/jpeg">
</head>
<body>
    <div class="certificate-container">
        <ul class="info-list">
            <li>
                <div class="info-label">姓名</div>
                <div class="info-content">王莎莎</div>
            </li>
            <li>
                <div class="info-label">证书编号</div>
                <div class="info-content">KSD-2024070360</div>
            </li>
            <li>
                <div class="info-label">证书名称</div>
                <div class="info-content">孤独症康复评估专业技能培训合格证书</div>
            </li>
            <li>
                <div class="info-label">发证时间</div>
                <div class="info-content">2024-09</div>
            </li>
        </ul>

        <div class="image-wrapper">
            <picture>
                <source srcset="./wss.webp" type="image/webp">
                <img class="cert-image" 
                     src="./wss.jpg"
                     alt="专业技能证书"
                     loading="lazy"
                     decoding="async"
                     width="800"
                     height="600">
            </picture>
        </div>

        <div class="download-tip">
            <span class="required-star">*</span>
            请长按图片保存证书
        </div>
    </div>

    <!-- 高性能加载脚本 -->
    <script>
    (function(){
        // 配置参数
        const CACHE_BUSTER = 'v=1.0.3';
        const isWeChat = /MicroMessenger/i.test(navigator.userAgent);
        const imgElement = document.querySelector('.cert-image');

        // 微信环境直接加载JPG
        if(isWeChat) {
            imgElement.src = `./wss.jpg?${CACHE_BUSTER}`;
            imgElement.onload = () => imgElement.classList.add('loaded');
            return;
        }

        // 现代浏览器加载策略
        const loadImage = () => {
            const webpLoader = new Image();
            webpLoader.src = `./wss.webp?${CACHE_BUSTER}`;
            
            webpLoader.onload = () => {
                imgElement.src = webpLoader.src;
                imgElement.classList.add('loaded');
            };

            webpLoader.onerror = () => {
                imgElement.src = `./wss.jpg?${CACHE_BUSTER}`;
                imgElement.classList.add('loaded');
            };
        };

        // 视窗检测(Intersection Observer)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    loadImage();
                    observer.unobserve(imgElement);
                }
            });
        }, {
            rootMargin: '200px',
            threshold: 0.01
        });

        // 启动观察
        observer.observe(imgElement);

        // 保底加载(3秒后强制加载)
        setTimeout(() => {
            if(!imgElement.classList.contains('loaded')) {
                loadImage();
            }
        }, 3000);

        // 错误处理
        imgElement.onerror = () => {
            if(!imgElement.src.includes('.jpg')) {
                imgElement.src = `./wss.jpg?${CACHE_BUSTER}`;
            }
        };
    })();
    </script>
</body>
</html>